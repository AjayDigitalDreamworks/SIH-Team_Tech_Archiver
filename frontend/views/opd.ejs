<%- include('./partials/sidebar.ejs') %>
    <link rel="stylesheet" href="/css/opd.css">
    <div class="content-area p-4">
        <!-- Header -->


        <div class="dashboard-content">
            <!-- Queue Overview Section -->
            <div class="queue-overview">
                <h2>Queue Overview</h2>

                <!-- Statistics Cards -->
                <div class="queue-stats-grid">
                    <div class="queue-stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Total Patients</h3>
                            <div class="stat-number">
                                <%= totalPatients %>
                            </div>
                            <div class="stat-subtitle">Today's patients</div>
                        </div>
                        <!-- <button class="view-details-btn">View Details</button> -->
                    </div>

                    <div class="queue-stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Avg. Wait Time</h3>
                            <div class="stat-number">
                                <%= avgWaitTime %> min
                            </div>
                            <div class="stat-subtitle">Across all departments</div>
                        </div>
                        <!-- <button class="view-details-btn">View Details</button> -->
                    </div>

                    <div class="queue-stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-list"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Patients in Queue</h3>
                            <div class="stat-number">
                                <%= waiting %>
                            </div>
                            <div class="stat-subtitle">Currently waiting</div>
                        </div>
                        <!-- <button class="view-details-btn">View Details</button> -->
                    </div>

                    <div class="queue-stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3>Consultations Done</h3>
                            <div class="stat-number">
                                <%= completed %>
                            </div>
                            <div class="stat-subtitle">Today's completed visits</div>
                        </div>
                        <!-- <button class="view-details-btn">View Details</button> -->
                    </div>
                </div>
            </div>

            <!-- Main Queue Section -->
            <div class="queue-management-section">
                <!-- Current Patient Queue -->
                <div class="queue-container">
                    <div class="section-header">
                        <h3>Current Patient Queue</h3>
                    </div>

                    <div class="queue-table">
                        <div class="queue-table-header">
                            <div class="header-cell">TOKEN</div>
                            <div class="header-cell">PATIENT NAME</div>
                            <div class="header-cell">WAIT TIME</div>
                            <div class="header-cell">STATUS</div>
                        </div>

                        <div class="queue-table-body" id="queueTableBody">
                            <% if (queue.length> 0) { %>
                                <% queue.forEach(patient=> { %>
                                    <div class="queue-row" data-token="<%= patient.tokenNumber %>"
                                        style="cursor: pointer;">
                                        <div class="token-cell">
                                            <%= patient.tokenNumber %>
                                        </div>
                                        <div class="patient-name-cell">
                                            <%= patient.patient.name %>
                                        </div>
                                        <div class="wait-time-cell">
                                            <%= patient.waitTime %> mins
                                        </div>
                                        <div class="status-cell">
                                            <span class="status-badge status-<%= patient.status %>">
                                                <%= patient.status.charAt(0).toUpperCase() + patient.status.slice(1) %>
                                            </span>
                                        </div>
                                    </div>
                                    <% }) %>
                                        <% } else { %>
                                            <span>No records found</span>
                                            <% } %>
                        </div>
                    </div>
                </div>

                <!-- Sidebar Section -->
                <div class="queue-sidebar">
                    <!-- Doctor Availability -->
                    <div class="doctor-availability">
                        <h3>Doctor Availability</h3>
                        <div class="doctor-list" id="doctorList">
                            <% doctorsData.forEach(doc=> { %>
                                <div id="doctorList">
                                    <div class="doctor-item">
                                        <div class="doctor-info">
                                            <h4>Dr. <%= doc.name %>
                                            </h4>
                                            <p>
                                                <%= doc.qualifications %> â€” <%= doc.department %>
                                            </p>
                                        </div>
                                        <div class="doctor-status">
                                            <!-- <span class="status-indicator status-available">Available</span> -->
                                            <% if (doc.status.toLowerCase()==="available" ) {%>
                                                <span class="status-indicator status-available ">Available</span>

                                                <% }else if(doc.status.toLowerCase()==="busy" ) { %>
                                                    <span class="status-indicator status-busy ">Busy</span>
                                                    <% }else if(doc.status.toLowerCase()==="on break" ) { %>

                                                        <span class="status-indicator bg-info text-danger">On
                                                            Break</span>
                                                        <% } %>
                                        </div>
                                    </div>
                                    <% }) %>

                                </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <%- include('./partials/footer.ejs') %>