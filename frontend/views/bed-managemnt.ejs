<%- include('./partials/sidebar.ejs') %>
    <link rel="stylesheet" href="/css/bed.css">
    <div class="content-area p-4">


        <!-- <div class="main-content"> -->
        <!-- Header -->

        <div class="dashboard-content">
    <!-- Statistics Cards -->
    <div class="stats-grid">
        <div class="stat-card total-beds">
            <div class="stat-icon">
                <i class="fas fa-bed"></i>
            </div>
            <div class="stat-info">
                <h3>Total Beds</h3>
                <div class="stat-number"><%= totalBeds %></div>
            </div>
        </div>
        <div class="stat-card occupied-beds">
            <div class="stat-icon">
                <i class="fas fa-user-injured"></i>
            </div>
            <div class="stat-info">
                <h3>Occupied Beds</h3>
                <div class="stat-number"><%= occupiedBeds %></div>
            </div>
        </div>
        <div class="stat-card available-beds">
            <div class="stat-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-info">
                <h3>Available Beds</h3>
                <div class="stat-number"><%= availableBeds %></div>
            </div>
        </div>
        <div class="stat-card maintenance-beds">
            <div class="stat-icon">
                <i class="fas fa-tools"></i>
            </div>
            <div class="stat-info">
                <h3>Cleaning/Maintenance</h3>
                <div class="stat-number"><%= maintenanceBeds %></div>
            </div>
        </div>
    </div>

    <!-- Bed Status Section -->
    <div class="bed-management-section">
        <div class="bed-status-container">
            <div class="section-header">
                <h2>Real-Time Bed Status</h2>
                <p>Monitor and manage bed availability across departments</p>
                <div class="filters">
                    <select id="roomFilter">
                        <option value="">Search by Room or Patient Name...</option>
                        <% 
                        // dynamically add unique rooms from beds
                        let rooms = [...new Set(beds.map(bed => bed.room).filter(r => r))];
                        rooms.forEach(room => { %>
                            <option value="<%= room %>"><%= room %></option>
                        <% }) %>
                    </select>
                    <select id="bedTypeFilter">
                        <option value="">All Bed Types</option>
                        <option value="ICU">ICU</option>
                        <option value="General">General</option>
                        <option value="Private">Private</option>
                        <option value="Emergency">Emergency</option>
                    </select>
                    <select id="departmentFilter">
                        <option value="">All Departments</option>
                        <option value="Critical Care">Critical Care</option>
                        <option value="Cardiology">Cardiology</option>
                        <option value="Orthopedics">Orthopedics</option>
                        <option value="Emergency">Emergency</option>
                        <option value="Neurology">Neurology</option>
                    </select>
                </div>
                <button class="reset-filters">Reset Filters</button>
            </div>

            <!-- Bed Grid -->
            <div class="bed-grid" id="bedGrid">
                <% beds.forEach(bed => { %>
                    <div class="bed-card" data-bed-id="<%= bed.bedId %>">
                        <div class="bed-header">
                            <div class="bed-number"><%= bed.bedId %></div>
                            <span class="bed-status status-<%= bed.status %>">
                                <%= bed.status.charAt(0).toUpperCase() + bed.status.slice(1) %>
                            </span>
                        </div>

                        <div class="bed-type"><%= bed.condition || "General" %></div>

                        <div class="patient-info">
                            <% if (bed.status === "occupied" && bed.patient && bed.patient.name) { %>
                                <div class="patient-name">Patient: <%= bed.patient.name %></div>
                                <div class="patient-id">ID: <%= bed.patient.id %></div>
                                <div class="admission-time">Admitted: <%= bed.admitDate ? bed.admitDate.toLocaleString() : "N/A" %></div>
                            <% } else { %>
                                <div class="patient-name">Ready for new admission.</div>
                            <% } %>
                        </div>

                        <div class="bed-actions">
                            <div class="department-tag"><%= bed.ward || "N/A" %></div>
                            <button class="action-button">View Details</button>
                        </div>
                    </div>
                <% }) %>
            </div>
        </div>

        <!-- Activity Sidebar -->
        <div class="activity-sidebar">
            <div class="activity-header">
                <h3>Recent Bed Activity</h3>
                <p>Latest updates on bed allocations and status changes</p>
            </div>
            <div class="activity-list" id="activityList">
                <!-- You can add dynamic activity data here if available -->
            </div>
            <button class="view-all-activities">View All Activities</button>
        </div>
    </div>
</div>

    </div>

    <%- include('./partials/footer.ejs') %>